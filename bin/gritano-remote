#!/usr/bin/env ruby
$LOAD_PATH.unshift(File.join(File.dirname(__FILE__), '..', 'lib'))
$LOAD_PATH.unshift(File.dirname(__FILE__))

require 'gritano'

ENV['SSH_ORIGINAL_COMMAND'] ||= ''
remote_user = ARGV[0]
ARGV.replace(ENV['SSH_ORIGINAL_COMMAND'].split(' '))


Gritano::CLI.configure do |config|
  config.database_connection = File.open(File.join(Etc.getpwuid.dir, '.gritano/database.yml'))
  config.repository_path = File.join(Etc.getpwuid.dir, '.gritano/database.yml')
  config.remote = true
  config.remote_user = remote_user
end